@page
@model MonolithFirewall.Pages.Docs.InstallationModel
@{
    ViewData["Title"] = "Installation Guide";
}

<section class="section" style="padding-top: 100px;">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="doc-sidebar">
                    <h5 style="color: var(--primary-color); margin-bottom: 1.5rem;">
                        <i class="fas fa-list"></i> Documentation
                    </h5>
                    <nav class="nav flex-column">
                        <a class="nav-link" asp-page="/Docs/Index">
                            <i class="fas fa-home"></i> Overview
                        </a>
                        <a class="nav-link active" asp-page="/Docs/Installation">
                            <i class="fas fa-download"></i> Installation
                        </a>
                        <a class="nav-link" asp-page="/Docs/Configuration">
                            <i class="fas fa-cog"></i> Configuration
                        </a>
                        <a class="nav-link" asp-page="/Docs/Firewall">
                            <i class="fas fa-shield-alt"></i> Firewall Rules
                        </a>
                        <a class="nav-link" asp-page="/Docs/VPN">
                            <i class="fas fa-lock"></i> VPN Setup
                        </a>
                        <a class="nav-link" asp-page="/Docs/Monitoring">
                            <i class="fas fa-chart-line"></i> Monitoring
                        </a>
                        <a class="nav-link" asp-page="/Docs/FAQ">
                            <i class="fas fa-question-circle"></i> FAQ
                        </a>
                    </nav>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="doc-content">
                    <h1><i class="fas fa-download"></i> Installation Guide</h1>
                    <p>
                        This guide will walk you through the process of installing Monolith Firewall on your hardware.
                    </p>

                    <h2 id="prerequisites">Prerequisites</h2>
                    <p>Before you begin, ensure you have:</p>
                    <ul>
                        <li>A compatible x86_64 (AMD64) or ARM64 system</li>
                        <li>At least 1 GB of RAM (2 GB+ recommended)</li>
                        <li>8 GB of available storage (16 GB+ recommended)</li>
                        <li>At least 2 network interfaces</li>
                        <li>A USB drive (4 GB+) or DVD for installation media</li>
                    </ul>

                    <h2 id="download">Step 1: Download the ISO</h2>
                    <p>Download the appropriate ISO image for your architecture:</p>

                    <div class="row mt-3 mb-4">
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fab fa-linux"></i> AMD64 / x86_64</h5>
                                <p>For Intel and AMD 64-bit processors</p>
                                <div class="code-block mt-3">
                                    <code>wget https://downloads.monolithfirewall.com/builds/latest-amd64.iso</code>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="feature-card">
                                <h5><i class="fas fa-microchip"></i> ARM64</h5>
                                <p>For ARM-based 64-bit processors</p>
                                <div class="code-block mt-3">
                                    <code>wget https://downloads.monolithfirewall.com/builds/latest-arm64.iso</code>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2 id="verify">Step 2: Verify the ISO</h2>
                    <p>It's important to verify the integrity of the downloaded ISO:</p>
                    <div class="code-block">
                        <code>sha256sum monolith-firewall-latest-amd64.iso</code>
                    </div>
                    <p class="mt-3">Compare the output with the published checksum on the download page.</p>

                    <h2 id="create-media">Step 3: Create Bootable Media</h2>

                    <h3>On Linux</h3>
                    <p>Use the <code>dd</code> command to write the ISO to a USB drive:</p>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <strong>Warning:</strong> This will erase all data on the target device. Make sure to specify the correct device.
                    </div>
                    <div class="code-block">
                        <code># Find your USB device (e.g., /dev/sdb)<br>
lsblk<br>
<br>
# Write the ISO to the USB drive<br>
sudo dd if=monolith-firewall-latest-amd64.iso of=/dev/sdX bs=4M status=progress && sync</code>
                    </div>

                    <h3>On Windows</h3>
                    <p>Use Rufus or similar tool:</p>
                    <ol>
                        <li>Download and run <a href="https://rufus.ie" target="_blank" style="color: var(--primary-color);">Rufus</a></li>
                        <li>Select your USB drive</li>
                        <li>Select the Monolith Firewall ISO</li>
                        <li>Click "Start" and wait for completion</li>
                    </ol>

                    <h2 id="boot">Step 4: Boot from Installation Media</h2>
                    <ol>
                        <li>Insert the USB drive or DVD into your target system</li>
                        <li>Restart the system and enter the BIOS/UEFI settings (usually F2, F12, DEL, or ESC)</li>
                        <li>Set the boot order to boot from USB/DVD first</li>
                        <li>Save and exit</li>
                    </ol>

                    <h2 id="install">Step 5: Run the Installer</h2>
                    <p>Once the system boots from the installation media, you'll see the Monolith Firewall installer:</p>

                    <h3>1. Language and Locale Selection</h3>
                    <ul>
                        <li>Select your preferred language</li>
                        <li>Choose your timezone and keyboard layout</li>
                    </ul>

                    <h3>2. Network Configuration</h3>
                    <ul>
                        <li>The installer will detect available network interfaces</li>
                        <li>Assign WAN (Internet-facing) and LAN (internal network) interfaces</li>
                        <li>Configure IP addresses (DHCP or static)</li>
                    </ul>

                    <h3>3. Disk Partitioning</h3>
                    <ul>
                        <li><strong>Automatic:</strong> Let the installer partition the disk (recommended for beginners)</li>
                        <li><strong>Manual:</strong> Create custom partitions if needed</li>
                    </ul>

                    <div class="alert alert-info mt-3">
                        <i class="fas fa-info-circle"></i>
                        <strong>Recommended partition scheme:</strong>
                        <ul class="mt-2 mb-0">
                            <li>/boot - 512 MB (ext4)</li>
                            <li>/ (root) - 8 GB minimum (ext4)</li>
                            <li>swap - 2x RAM size</li>
                            <li>/var - Remaining space (for logs)</li>
                        </ul>
                    </div>

                    <h3>4. User Account Setup</h3>
                    <ul>
                        <li>Create an administrative user account</li>
                        <li>Set a strong password</li>
                        <li>Optionally enable SSH access</li>
                    </ul>

                    <h3>5. Install Base System</h3>
                    <p>The installer will now:</p>
                    <ul>
                        <li>Copy system files</li>
                        <li>Install the .NET 10 runtime</li>
                        <li>Configure the bootloader</li>
                        <li>Install firewall components</li>
                    </ul>
                    <p>This process typically takes 5-15 minutes depending on your hardware.</p>

                    <h2 id="first-boot">Step 6: First Boot</h2>
                    <p>After installation completes:</p>
                    <ol>
                        <li>Remove the installation media</li>
                        <li>Reboot the system</li>
                        <li>Log in with the credentials you created</li>
                    </ol>

                    <h2 id="initial-config">Step 7: Initial Configuration</h2>
                    <p>On first boot, you'll be greeted with a configuration wizard:</p>

                    <div class="code-block">
                        <code>Welcome to Monolith Firewall!<br>
<br>
Web Interface: https://&lt;your-ip&gt;:8443<br>
Default credentials: admin / (password you set during installation)</code>
                    </div>

                    <p class="mt-3">Access the web interface from a computer on your LAN to continue configuration.</p>

                    <h2 id="next-steps">Next Steps</h2>
                    <p>Now that Monolith Firewall is installed, you can:</p>
                    <ul>
                        <li><a asp-page="/Docs/Configuration" style="color: var(--primary-color);">Configure basic firewall rules</a></li>
                        <li><a asp-page="/Docs/Firewall" style="color: var(--primary-color);">Set up advanced firewall policies</a></li>
                        <li><a asp-page="/Docs/VPN" style="color: var(--primary-color);">Configure VPN services</a></li>
                        <li><a asp-page="/Docs/Monitoring" style="color: var(--primary-color);">Set up monitoring and alerts</a></li>
                    </ul>

                    <div class="alert alert-info mt-4">
                        <i class="fas fa-info-circle"></i>
                        <strong>Need Help?</strong> Check the <a asp-page="/Docs/FAQ" style="color: var(--primary-color); font-weight: bold;">FAQ</a>
                        or visit our <a href="https://github.com" target="_blank" style="color: var(--primary-color); font-weight: bold;">GitHub</a> for support.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
